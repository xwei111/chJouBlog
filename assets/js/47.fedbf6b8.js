(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{567:function(t,a,s){"use strict";s.r(a);var n=s(6),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("之前面试的时候也遇到了问这个问题的，这个问题涉及的面还是比较广的，有DNS、TCP、HTTP，HTML、CSS、JS绘制到页面的过程，这中间又会涉及到安全、优化一些列问题，很是值得去了解一下")]),t._v(" "),a("h2",{attrs:{id:"dns简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns简介"}},[t._v("#")]),t._v(" DNS简介")]),t._v(" "),a("p",[t._v("DNS即域名系统，当访问某个域名时最终会解析为ip地址，实际访问的也就是这个ip地址，但是ip地址并不方便记忆，所以后来发明了DNS服务，它是域名和IP地址相互映射的一个分布式数据库")]),t._v(" "),a("h2",{attrs:{id:"域-域服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#域-域服务器"}},[t._v("#")]),t._v(" 域 & 域服务器")]),t._v(" "),a("p",[t._v("以本博客"),a("code",[t._v("https://www.chasejourney.top")]),t._v("为例，"),a("code",[t._v(".")]),t._v("符号是命名空间用来分割各个域，其实"),a("code",[t._v(".top")]),t._v("后还有一个"),a("code",[t._v(".")]),t._v("(通常不写)，这个"),a("code",[t._v(".")]),t._v("就是根域，"),a("code",[t._v(".com")]),t._v("就是顶级域，"),a("code",[t._v(".chasejourney")]),t._v("是二级域，"),a("code",[t._v("www")]),t._v("是三级域，它们共同组成了三级域名")]),t._v(" "),a("ul",[a("li",[t._v("根服务器")])]),t._v(" "),a("p",[t._v("全球有13台IPv4根服务器、25台IPv6根服务器，中国部署了1台IPv6主根服务器3台IPv6辅根服务器，理论上说所有域名查询都是从根服务器开始的，只有根服务器会告诉我们顶级域名在哪里托管")]),t._v(" "),a("p",[t._v("DNS协议使用了端口上的UDP和TCP协议，UDP通常用于查询和响应，TCP多次验证比较慢用于传输，UDP正常工作的最大长度是512字节，512字节限制了根服务器的数量和名字，所以IPv4根服务器只能限制在13个，且命名为A-M")]),t._v(" "),a("ul",[a("li",[t._v("顶级域名 & 顶级域名服务器")])]),t._v(" "),a("p",[t._v("一般性顶级域名(gTLD)： .com(公司)、.net(网络服务机构)、.org(非盈利组织)、.int(国际组织)、.edu(教育机构)等")]),t._v(" "),a("p",[t._v("国别顶级域名(ccTLD)：.cn(中国)、us(美国)、uk(英国)、.io(英属印度洋领地)、.cc(科科斯群岛)")]),t._v(" "),a("p",[t._v("顶级域名服务器负责注册的二级域名")]),t._v(" "),a("h2",{attrs:{id:"域名解析流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#域名解析流程"}},[t._v("#")]),t._v(" 域名解析流程")]),t._v(" "),a("ol",[a("li",[t._v("浏览器缓存")])]),t._v(" "),a("p",[t._v("浏览器会去查询缓存中是否有该域名对应的ip地址，如果有解析就此结束")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("系统缓存")])]),t._v(" "),a("p",[t._v("浏览器没有查到相应的ip地址，会去本地hosts文件中查找有没有相应的ip地址，windows中hosts一般在"),a("code",[t._v("C:\\Windows\\System32\\drivers\\etc")])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("路由器缓存")])]),t._v(" "),a("p",[t._v("系统没有查到缓存，就会向路由器发送查询请求")]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("本地DNS服务器")])]),t._v(" "),a("p",[t._v("以上缓存都没有查询到IP就会向本地DNS服务器查询，本地DNS主要指的是各个服务商，如移动联通电信等")]),t._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[t._v("递归查询")])]),t._v(" "),a("p",[t._v("至此还没有查到ip，那就只能本地DNS服务向根服务器查询，根服务将所查询的顶级域名所在的服务器Ip地址返回给本地DNS，本地DNS在向顶级服务器在进行查询，顶级服务器将二级域名ip地址返回给本地服务器，之后重复该步骤，直到本地DNS拿到完整的ip地址并返给主机，本地DNS会缓存自己查询到的ip地址，如果此时有另外一个主机访问该域名，会直接返回缓存的ip地址")]),t._v(" "),a("h2",{attrs:{id:"dns预解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns预解析"}},[t._v("#")]),t._v(" DNS预解析")]),t._v(" "),a("ul",[a("li",[t._v("meta标签预解析")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("x-dns-prefetch-control"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("ul",[a("li",[t._v("link标签来强制对DNS做预解析")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://www.chasejourney.top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);