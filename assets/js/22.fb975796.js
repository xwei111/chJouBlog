(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{533:function(a,e,t){a.exports=t.p+"assets/img/1.fa149cf1.png"},534:function(a,e,t){a.exports=t.p+"assets/img/2.5989c986.png"},535:function(a,e,t){a.exports=t.p+"assets/img/3.87bfff6a.jpg"},648:function(a,e,t){"use strict";t.r(e);var s=t(6),v=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),e("p",[a._v("新的一年，开启"),e("code",[a._v("2023")]),a._v("的第一篇。"),e("code",[a._v("git")]),a._v("命令很多，但平时用的最多的一定是下边几个")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git init\ngit pull\ngit add .\ngit commit -m 'xx'\ngit push\n")])])]),e("p",[a._v("没错，就是这几个命令帮助大家完成了工作，简单且亲切。但只会这几个命令难以应付工作的复杂度，如：")]),a._v(" "),e("ul",[e("li",[a._v("提交记录复杂且混乱怎么办")]),a._v(" "),e("li",[a._v("单个功能多次提交，其实只完成一个功能怎么办")]),a._v(" "),e("li",[a._v("只需要某个分支的某几次提交怎么办")]),a._v(" "),e("li",[a._v("强推代码覆盖掉丢失代码怎么办")])]),a._v(" "),e("p",[a._v("so，了解更多的命令会让这些事情事半功倍")]),a._v(" "),e("h2",{attrs:{id:"cherry-pick"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cherry-pick"}},[a._v("#")]),a._v(" cherry-pick")]),a._v(" "),e("p",[e("code",[a._v("cherry-pick")]),a._v("是一个非常实用的命令，他的作用就是可以将某次的提交记录合并到需要的分支去。")]),a._v(" "),e("p",[a._v("本司因为项目会存在好几个环境，常常切换完分支后忘记切回来，导致一些改动没有在需要的分支进行，这个时候就可以使用"),e("code",[a._v("cherry-pick")]),a._v("将需要的代码合并过来，比起手动操作"),e("code",[a._v("cherry-pick")]),a._v("简单且安全")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git cherry-pick <commitHash>\n")])])]),e("h2",{attrs:{id:"rebase"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rebase"}},[a._v("#")]),a._v(" rebase")]),a._v(" "),e("p",[e("code",[a._v("rebase")]),a._v("命令相对较多，而且也需要有一定了解入手才好，不然会把队友心态搞崩的，"),e("code",[a._v("rebase")]),a._v("和"),e("code",[a._v("merge")]),a._v("的最终目的都是合并代码，但是考虑的维度不一样")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("merge")]),a._v("简单无脑，有冲突处理就好，不会变基（其实就是不会改变提交记录的hash值），对新手及其友好，提交记录比较详细，但是提交记录也会相对混乱，不利于查找记录。复杂场景难以支持")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("rebase")]),a._v("最主要的问题是会变基，多人合作时需要注意，提交记录便于后期维护查找，可以支持较多复杂场景")])])]),a._v(" "),e("h3",{attrs:{id:"基础使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基础使用"}},[a._v("#")]),a._v(" 基础使用")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git rebase <branch>\n")])])]),e("p",[a._v("如果"),e("code",[a._v("branch")]),a._v("有新的提交，就会涉及到变基，变基就会导致提交记录即"),e("code",[a._v("hash")]),a._v("值的变化，如果这些变化的记录在变基前已经提交到远程，再次推送代码就要强推"),e("code",[a._v("git push --force")]),a._v("，强推代码也存在风险（推送前有新的提交），所以最好使用"),e("code",[a._v("git push --force-with-lease")])]),a._v(" "),e("p",[a._v("若是有冲突"),e("code",[a._v("rebase")]),a._v("会停止，解决完冲突后执行"),e("code",[a._v("git add .")]),a._v("后无需再次"),e("code",[a._v("commit")]),a._v("，执行"),e("code",[a._v("git rebase --continue")]),a._v("即可。建议不熟悉的同学先单独玩一下，了解清楚什么叫做变基")]),a._v(" "),e("p",[a._v("取消此次"),e("code",[a._v("rebase")]),a._v("，执行"),e("code",[a._v("git rebase --abort")])]),a._v(" "),e("h3",{attrs:{id:"合并commit记录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#合并commit记录"}},[a._v("#")]),a._v(" 合并commit记录")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git rebase -i HEAD~<num>\n或者\ngit rebase -i <commitHash>\n")])])]),e("p",[a._v("需要合并几次提交"),e("code",[a._v("num")]),a._v("填写几即可，常用来处理一个功能多次提交，且诸多提交毫无意义，如")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("asda3365 登录3\nxczx3365 登录2\n16cxc365 登录1\n164fxcx1 注册3\n164f3123 注册2\n164f5456 注册1\n")])])]),e("p",[a._v("这样的记录可以合并为"),e("code",[a._v("注册")]),a._v("和"),e("code",[a._v("登录")]),a._v("两条记录，此"),e("code",[a._v("vim")]),a._v("操作界面如下，将不需要的记录改为"),e("code",[a._v("s")]),a._v("（"),e("code",[a._v("suqash")]),a._v("表示将当前记录与上一个记录合并），"),e("code",[a._v("wq")]),a._v("保存后会弹出第二张图的界面，将"),e("code",[a._v("commit")]),a._v("信息改为自己能看懂的后保存即可")]),a._v(" "),e("p",[e("img",{attrs:{src:t(533),alt:"An image"}})]),a._v(" "),e("p",[e("img",{attrs:{src:t(534),alt:"An image"}})]),a._v(" "),e("h3",{attrs:{id:"onto"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#onto"}},[a._v("#")]),a._v(" onto")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git rebase --onto <newparent> <oldparent>\n")])])]),e("p",[e("code",[a._v("git rebase --onto")]),a._v("后可以接收三个参数，添加第三个参数时会生成新的分支，并指定"),e("code",[a._v("HEAD")]),a._v("的指向，没有相应的场景理解，所以我们先了解两个参数的情况。两个参数时第一个参数是新的父级，第二个是旧的父级，改变父级的指向，举两个栗子")]),a._v(" "),e("h4",{attrs:{id:"栗子一"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#栗子一"}},[a._v("#")]),a._v(" 栗子一")]),a._v(" "),e("p",[e("img",{attrs:{src:t(535),alt:"An image"}})]),a._v(" "),e("p",[a._v("如上图，在"),e("code",[a._v("feature2")]),a._v("分支上"),e("code",[a._v("rebase")]),a._v("到"),e("code",[a._v("master")]),a._v("即")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git rebase master\n")])])]),e("p",[a._v("之后提交记录便是"),e("code",[a._v("A-B-C-D'-F'-G'")]),a._v("，因为"),e("code",[a._v("D")]),a._v("是"),e("code",[a._v("feature2")]),a._v("和"),e("code",[a._v("feature1")]),a._v("的共同提交记录，若是不想存在"),e("code",[a._v("D")]),a._v("的记录则可以执行如下命令")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git rebase --onto master feature1\n")])])]),e("p",[a._v("之后提交记录便是"),e("code",[a._v("A-B-C-F'-G'")]),a._v("，改变"),e("code",[a._v("feature2")]),a._v("父级为"),e("code",[a._v("master")])]),a._v(" "),e("h4",{attrs:{id:"栗子二"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#栗子二"}},[a._v("#")]),a._v(" 栗子二")]),a._v(" "),e("p",[a._v("目前有如下提交"),e("code",[a._v("a-b-c-d-e-f")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("62d13c5 (HEAD -> master) f\n49978ef e\ne7bfae0 d\n9b87061 c\n2bded9a b\nef4f20d a\n")])])]),e("p",[a._v("如果想删除"),e("code",[a._v("c")]),a._v("这条记录可以执行，其含义是将旧父级"),e("code",[a._v("c")]),a._v("更新为新的父级"),e("code",[a._v("b")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git rebase --onto 2bded9a 9b87061\n")])])]),e("p",[a._v("而后提交记录变更为"),e("code",[a._v("a-b-d'-e'-f'")]),a._v("，"),e("code",[a._v("commitHash")]),a._v("从"),e("code",[a._v("d")]),a._v("开始变化，记录"),e("code",[a._v("c")]),a._v("消失")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("faec99a (HEAD -> master) f\n61a8631 e\n50cca8f d\n2bded9a b\nef4f20d a\n")])])]),e("h3",{attrs:{id:"pull-rebase"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-rebase"}},[a._v("#")]),a._v(" pull --rebase")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git pull 相当于 git fetch + git merge\ngit pull --rebase 相当于 git fetch + git rebase\n")])])]),e("h2",{attrs:{id:"force-with-lease"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#force-with-lease"}},[a._v("#")]),a._v(" --force-with-lease")]),a._v(" "),e("p",[e("code",[a._v("rebase")]),a._v("那边也提到了强推代码，强推代码一直是不被推荐的，因为即使操作的再快也无法保证在提交之前有其他的提交，所以"),e("code",[a._v("git")]),a._v("提供了新的命令")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git push --force-with-lease\n")])])]),e("p",[a._v("此命令提交前会检查是否有新的提交，若有新的提交则会提交失败")]),a._v(" "),e("p",[a._v("注意"),e("code",[a._v("--force-with-lease")]),a._v("失败后再执行一次也会强制提交覆盖")]),a._v(" "),e("h2",{attrs:{id:"reset、revert"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reset、revert"}},[a._v("#")]),a._v(" reset、revert")]),a._v(" "),e("p",[e("code",[a._v("reaset")]),a._v("和"),e("code",[a._v("revert")]),a._v("均可以用作版本回退，适用场景不同")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("reaset")]),a._v("回退版本后会丢失该版本之后的提交记录，推送至远程时需要强推代码")])]),a._v(" "),e("p",[a._v("有如下提交")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("5f21366 (HEAD -> master) d\na542921 c\n795a7b0 b\n4001e19 a\n")])])]),e("p",[a._v("回退到"),e("code",[a._v("b")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git reset --hard 795a7b0\n")])])]),e("p",[a._v("提交记录如下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("795a7b0 (HEAD -> master) b\n4001e19 a\n")])])]),e("ul",[e("li",[e("code",[a._v("revert")]),a._v("反做版本后不会丢失提交记录，会产生新的反做记录")])]),a._v(" "),e("p",[a._v("有如下提交")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("5f21366 (HEAD -> master) d\na542921 c\n795a7b0 b\n4001e19 a\n")])])]),e("p",[a._v("反做提交记录"),e("code",[a._v("b")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git revert -n 795a7b0\n有冲突，继续\ngit add .\ngit revert --continue\n")])])]),e("p",[a._v("提交记录不会丢失")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('471cceb (HEAD -> master) Revert "b"\n5f21366 d\na542921 c\n795a7b0 b\n4001e19 a\n')])])]),e("p",[a._v("所以当版本只是临时切换时，"),e("code",[a._v("revert")]),a._v("比"),e("code",[a._v("reset")]),a._v("更合适")]),a._v(" "),e("h2",{attrs:{id:"stash"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stash"}},[a._v("#")]),a._v(" stash")]),a._v(" "),e("p",[a._v("工作中常遇到开发了一部分需要到其他分支处理问题的情况，但本次改动又不足以提交，这个时候就需要"),e("code",[a._v("stash")]),a._v("暂存代码，等问题处理完毕在切回来继续开发，涉及到的命令如下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('git stash // 暂存\ngit stash save "message" // 暂存 + 备注\ngit stash pop // 应用最近一次暂存的修改，并删除暂存的记录\ngit stash apply  // 应用某个存储， git stash apply stash@{$num} ，num默认为0\ngit stash list // 查看所所有暂存\ngit stash clear // 删除所有暂存\n')])])]),e("h2",{attrs:{id:"merge"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#merge"}},[a._v("#")]),a._v(" merge")]),a._v(" "),e("p",[a._v("合并分支，并将分支上的提交合并成一次提交，合并过来后续通过"),e("code",[a._v("git add .")]),a._v("和"),e("code",[a._v("git commit -m 'xx'")]),a._v("重新提交代码")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git merge <branch> --squash\n")])])]),e("h2",{attrs:{id:"commit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commit"}},[a._v("#")]),a._v(" commit")]),a._v(" "),e("p",[e("code",[a._v("commit")]),a._v("信息填写有误可以通过以下命令修改")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git commit --amend\n")])])]),e("h2",{attrs:{id:"结语"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#结语"}},[a._v("#")]),a._v(" 结语")]),a._v(" "),e("p",[a._v("多操作有助于理解")])])}),[],!1,null,null,null);e.default=v.exports}}]);