(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{570:function(t,s,a){t.exports=a.p+"assets/img/20210624deploy1.067b46bc.png"},571:function(t,s,a){t.exports=a.p+"assets/img/20210624deploy2.e8216c44.png"},572:function(t,s,a){t.exports=a.p+"assets/img/20210624deploy3.f0daa68d.png"},573:function(t,s,a){t.exports=a.p+"assets/img/20210624deploy4.fc8e5692.png"},574:function(t,s,a){t.exports=a.p+"assets/img/20210624deploy5.6dc04725.png"},575:function(t,s,a){t.exports=a.p+"assets/img/20210624deploy6.c89a9278.png"},576:function(t,s,a){t.exports=a.p+"assets/img/20210624deploy7.e2b22acb.png"},577:function(t,s,a){t.exports=a.p+"assets/img/20210624deploy8.a1a41091.png"},578:function(t,s){t.exports="data:image/png;base64,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"},579:function(t,s,a){t.exports=a.p+"assets/img/20210624deploy10.04ef523c.png"},653:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),n("p",[t._v("追旅初入前端时公司还是用"),n("code",[t._v("ftp")]),t._v("工具去部署项目，用的最熟练的命令就是"),n("code",[t._v("rm -rf")]),t._v("和"),n("code",[t._v("cp")]),t._v("，现在看来自己当时还处于"),n("code",[t._v("冷兵器")]),t._v("时代，还傻傻的不自知。在之后的公司，除了部署方式不同，大多都开始使用"),n("code",[t._v("jenkins")]),t._v("去部署项目了，而随着前端工程化的深入人心，部署也已经是前端同学的必备技能，还真是学到老活到老，作为技术人还是要有技术人的觉悟的")]),t._v(" "),n("h2",{attrs:{id:"github-actions"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#github-actions"}},[t._v("#")]),t._v(" Github Actions")]),t._v(" "),n("p",[n("code",[t._v("actions")]),t._v("是"),n("code",[t._v("github")]),t._v("19年11月正式推出的"),n("code",[t._v("CI/CD")]),t._v("服务，追旅的博客也是通过"),n("code",[t._v("actions")]),t._v("实现自动化部署到"),n("code",[t._v("github")]),t._v("的，而"),n("code",[t._v("actions")]),t._v("与其他部署相比较大的优点就是不需要使用者再去书写复杂的脚本，可以引用其他开发者已有的"),n("code",[t._v("actions")]),t._v("就可以了")]),t._v(" "),n("h3",{attrs:{id:"基本术语"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本术语"}},[t._v("#")]),t._v(" 基本术语")]),t._v(" "),n("p",[n("code",[t._v("GitHub Actions")]),t._v("基本术语：")]),t._v(" "),n("ul",[n("li",[t._v("workflow")])]),t._v(" "),n("p",[t._v("持续集成一次运行的过程，就是一个 workflow")]),t._v(" "),n("ul",[n("li",[t._v("job")])]),t._v(" "),n("p",[t._v("一个 workflow 由一个或多个 jobs 构成，含义是一次持续集成的运行，可以完成多个任务")]),t._v(" "),n("ul",[n("li",[t._v("step")])]),t._v(" "),n("p",[t._v("每个 job 由多个 step 构成，一步步完成")]),t._v(" "),n("ul",[n("li",[t._v("action")])]),t._v(" "),n("p",[t._v("每个 step 可以依次执行一个或多个命令（action）")]),t._v(" "),n("h3",{attrs:{id:"yml文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#yml文件"}},[t._v("#")]),t._v(" yml文件")]),t._v(" "),n("p",[n("code",[t._v("GitHub Actions")]),t._v("执行的脚本是"),n("code",[t._v("yml")]),t._v("文件，位置在"),n("code",[t._v(".github/workflow")]),t._v("下")]),t._v(" "),n("p",[t._v("通常有两种配置方式：")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("通过github上的Actions选项直接配置，在github上配置完会直接commit一次，所以我们必须pull一次代码")])]),t._v(" "),n("li",[n("p",[t._v("在本地工程里边新建"),n("code",[t._v(".github\\workflows\\main.yml")]),t._v("，在"),n("code",[t._v("main.yml")]),t._v("中配置ok后提交代码就可以了")])])]),t._v(" "),n("h3",{attrs:{id:"配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),n("p",[t._v("这里以一份部署到"),n("code",[t._v("GitHub Pages")]),t._v("的配置为"),n("code",[t._v("demo")]),t._v("加上注释给大家看一下，"),n("code",[t._v("GitHub Pages")]),t._v("配置入口："),n("code",[t._v("settings=>GitHub Pages")])]),t._v(" "),n("div",{staticClass:"language-yml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-yml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# workflow名称，命名一个自己看得懂的即可")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Publish page\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# on 是监听触发的动作，这里监听push代码的动作，触发部署")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# branches 代表的是分支，还可以配置tag和paths，或者配置branches-ignore、tags-ignore  、paths-ignore忽略分支、tag等")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n      \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# schedule 可以配置schedule来定时触发部署，需要去了解一下cron表达式，这里选择手动部署")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# jobs 是我们将要做的事情")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 建立一个名为build-and-deploy的job")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# runs-on 指定依赖的虚拟环境为ubuntu-latest")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# steps 下边开始各个步骤")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name: Checkout 检索代码")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用其他开发者的action:  actions/checkout@v2 ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name: Install and Build 开始安装环境并打包")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name: Deploy 开始部署，同样使用其他作者的现有action")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# width BRANCH 需要部署的分支：BRANCH")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# with FOLDER 需要部署的文件(即打包后的资源) blog/.vuepress/dist")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-and-deploy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2 \n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("persist-credentials")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install and Build \n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),n("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n          npm install\n          npm run build")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy \n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" JamesIves/github"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@releases/v3\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("GITHUB_TOKEN")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.GITHUB_TOKEN "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BRANCH")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gh"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FOLDER")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" blog/.vuepress/dist\n")])])]),n("p",[t._v("可以看到"),n("code",[t._v("GitHub Actions")]),t._v("的部署方式相当的简单，很多关键地方可以使用现成的"),n("code",[t._v("action")]),t._v("，大大的降低的部署的成本，线上部署进度到"),n("code",[t._v("Github Actions")]),t._v("查看")]),t._v(" "),n("h2",{attrs:{id:"jenkins-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-nginx"}},[t._v("#")]),t._v(" Jenkins & nginx")]),t._v(" "),n("p",[t._v("大家可以先到"),n("a",{attrs:{href:"https://www.aliyun.com/daily-act/ecs/free?utm_content=se_1009187272",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云"),n("OutboundLink")],1),t._v("注册一个免费的服务器，大概有1-12月的样子，足够我们去做一些尝试了，不过配置过程的相当的痛苦（小白表示各种配置以及权限的问题，真滴能把人搞死了，说到底还是太弱了），追旅虚拟机用的是"),n("code",[t._v("ubuntu")]),t._v(",阿里云提供了多种链接虚拟机的方式，打击可以试一下，追旅也推荐一款连接服务器的工具"),n("a",{attrs:{href:"https://mobaxterm.mobatek.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("mobaxterm"),n("OutboundLink")],1),t._v("，下边是阿里云提供的方式")]),t._v(" "),n("p",[n("img",{attrs:{src:a(570),alt:"An image"}})]),t._v(" "),n("p",[t._v("使用阿里云"),n("code",[t._v("ssh")]),t._v("链接遇到问题时的几种处理方式:")]),t._v(" "),n("ol",[n("li",[t._v("到安全组中开启端口，例如"),n("code",[t._v("ssh")]),t._v("的端口默认为"),n("code",[t._v("22")])]),t._v(" "),n("li",[t._v("到"),n("code",[t._v("/etc/ssh/sshd_config")]),t._v("中看一下"),n("code",[t._v("PermitRootLogin")]),t._v("配置是否为"),n("code",[t._v("yes")]),t._v("并且注释关闭（#号删掉）")]),t._v(" "),n("li",[n("code",[t._v("ssh")]),t._v("无法链接，可以查看是否启动了"),n("code",[t._v("ssh")]),t._v("服务")])]),t._v(" "),n("p",[t._v("其他的小问题不说了，更多问题自行查找吧")]),t._v(" "),n("h3",{attrs:{id:"nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" nginx")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 安装 nginx")]),t._v("\napt"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" install nginx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动")]),t._v("\nservice nginx start\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 停止")]),t._v("\nservice nginx stop\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 重启")]),t._v("\nservice nginx restart\n")])])]),n("p",[t._v("简单配置一下"),n("code",[t._v("nginx")]),t._v("，接下来作为我们测试项目的部署地址，配置文件在"),n("code",[t._v("/etc/nginx/nginx.conf")]),t._v("，添加如下配置：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("server {\n  listen  8000;\n  server_name  localhost;\n  location / {\n    root  test;\n    index  index.html index.htm;\n    try_files $uri $uri/ /index.html; // 对于history路由的配置\n  }\n  // 配置反向代理，以/lesscode/开头的请求指向http://47.98.126.233:3000\n  location ^~/lesscode/ {\n    proxy_pass http://47.98.126.233:3000;\n  }\n}\n")])])]),n("p",[t._v("前端静态资源的部署地址是"),n("code",[t._v("/usr/share/nginx/")]),t._v("，可以自行创建"),n("code",[t._v("test")]),t._v("文件夹，并添加一个"),n("code",[t._v("html")]),t._v("页面看一下是否可以访问")]),t._v(" "),n("p",[n("code",[t._v("nginx")]),t._v("更多配置不在介绍，目前基本满足了我们自动化部署测试的需求，"),n("code",[t._v("nginx")]),t._v("很强大，追旅之后专门做一期的分享")]),t._v(" "),n("h3",{attrs:{id:"jenkins"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jenkins"}},[t._v("#")]),t._v(" jenkins")]),t._v(" "),n("p",[n("code",[t._v("jenkins")]),t._v("的安装启动方式和"),n("code",[t._v("nginx")]),t._v("一样，初始化"),n("code",[t._v("jenkins")]),t._v("不说了，假设我们现在以及启动了"),n("code",[t._v("jenkins")]),t._v("，接下来除了默认安装的插件外，需要额外安装两个插件："),n("code",[t._v("NodeJS Plugin")]),t._v(" 和 "),n("code",[t._v("Publish Over SSH")]),t._v("，一个是用来配置"),n("code",[t._v("node")]),t._v("环境，一个是用来连接远程服务，记得装完插件要重启"),n("code",[t._v("jenkins")]),t._v("服务")]),t._v(" "),n("p",[n("code",[t._v("jenkins")]),t._v("依赖"),n("code",[t._v("java")]),t._v("，阿里云的服务器没有"),n("code",[t._v("java")]),t._v("环境，记得自行安装一下")]),t._v(" "),n("h4",{attrs:{id:"node"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node"}},[t._v("#")]),t._v(" node")]),t._v(" "),n("p",[n("code",[t._v("node")]),t._v("的配置入口在"),n("code",[t._v("全局工具配置")]),t._v("，选择自己需要的"),n("code",[t._v("node")]),t._v("版本，"),n("code",[t._v("node")]),t._v("版本要和虚拟机安装的"),n("code",[t._v("node")]),t._v("保持一致")]),t._v(" "),n("p",[n("img",{attrs:{src:a(571),alt:"An image"}})]),t._v(" "),n("h4",{attrs:{id:"ssh"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[t._v("#")]),t._v(" ssh")]),t._v(" "),n("p",[n("code",[t._v("ssh")]),t._v("配置入口在"),n("code",[t._v("系统配置")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(572),alt:"An image"}})]),t._v(" "),n("ul",[n("li",[t._v("name: 定义一个名称")]),t._v(" "),n("li",[t._v("Hostname：服务器地址")]),t._v(" "),n("li",[t._v("Username：登录用户")]),t._v(" "),n("li",[t._v("Remote Directory：远程部署地址")]),t._v(" "),n("li",[t._v("Passphrase / Password： 填写用户密码")])]),t._v(" "),n("p",[t._v("填完这些保存即可")]),t._v(" "),n("h4",{attrs:{id:"创建项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建项目"}},[t._v("#")]),t._v(" 创建项目")]),t._v(" "),n("p",[t._v("起一个名称，选择一个自由风格的软件项目，当你有一个相同配置的项目时可以在下方复制那里输入项目名称，确定后会带出相同的配置")]),t._v(" "),n("p",[n("img",{attrs:{src:a(573),alt:"An image"}})]),t._v(" "),n("p",[t._v("进入项目的配置，填写项目的名称，关联"),n("code",[t._v("git")]),t._v("地址，因为"),n("code",[t._v("github")]),t._v("网络不稳定，经常失败，这里选择了"),n("code",[t._v("码云")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(574),alt:"An image"}})]),t._v(" "),n("p",[t._v("指定分支")]),t._v(" "),n("p",[n("img",{attrs:{src:a(575),alt:"An image"}})]),t._v(" "),n("p",[t._v("我们这里选择手动触发，然后为了保证服务器上码云冗余的资源及资源是最新的，我们选择打包后、部署前删除上次部署在"),n("code",[t._v("nginx")]),t._v("的资\n源")]),t._v(" "),n("p",[n("img",{attrs:{src:a(576),alt:"An image"}})]),t._v(" "),n("p",[t._v("选择之前配置的"),n("code",[t._v("node")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(577),alt:"An image"}})]),t._v(" "),n("p",[t._v("编写打包脚本，这里使用"),n("code",[t._v("cnpm")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(578),alt:"An image"}})]),t._v(" "),n("p",[t._v("最后配置打包部署的操作，打包后的文件是"),n("code",[t._v("dist")]),t._v("，并且我们只需要部署"),n("code",[t._v("dist")]),t._v("中的内容")]),t._v(" "),n("p",[n("img",{attrs:{src:a(579),alt:"An image"}})]),t._v(" "),n("p",[t._v("基本到此，整个部署基本完成了，完事访问我们"),n("code",[t._v("nginx")]),t._v("配置的"),n("code",[t._v("8000")]),t._v("端口即可："),n("a",{attrs:{href:"http://47.98.126.233:8000/",target:"_blank",rel:"noopener noreferrer"}},[t._v("访问地址"),n("OutboundLink")],1)]),t._v(" "),n("h2",{attrs:{id:"结语"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#结语"}},[t._v("#")]),t._v(" 结语")]),t._v(" "),n("p",[t._v("完成一次简单的部署并不麻烦，但是从头搭一套还是蛮累的，因为在自己不熟悉的领域搞事情啥都得边查边搞，而且有些不知名的错误，但前端发展这么快，或者说技术发展这么快，不拓展自己的技术领域又能在技术路上走多久呢，一直做一些熟悉的事情，好像也会很无聊吧")])])}),[],!1,null,null,null);s.default=e.exports}}]);