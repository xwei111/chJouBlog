---
title: 代码管理规范
date: 2022-06-28
tags: 
  - git
author: 追旅
location: 杭州滨江
---

## 前言

代码管理混乱，对开发人员代码合并、后续问题追踪都非常的不友好，跟重要的是生产环境将变得不在安全，常会有开发同事私自将代码合并到```master```的现象，带来不可预期的问题，所以制定```git```仓库管理规范是非常的有必要的

## 分支

* 生产分支: ```master```

* 预发分支: ```release```

* 迭代分支： ```name_v1.0.0```，分支名务必保持一致，例： ```risk_v1.5.0```

* 缺陷分支： ```fix_id```, ```id```为```tb```任务```id```

对于线上分支将会定期清理，特别是缺陷类分支及不符合明明规范的分支（当事人确认后删除），为避免后续分支问题带来的发布等问题，请命名符合规范

## 权限

### master

```master```分支权限将不会在放开，后续合并代码将由有权限同学进行合并

### 其余分支

无特殊情况，其余分支允许进行```push```、```pull```等操作

## 合并代码

1. 合并时间

* 默认代码合并时间为```周二```、```周四```

* 紧急发布，需要```tb```任务为依据进行合并，无```tb```不允许合并

* 全局类等优化待确认后可合并

* 其他情况找有权限同学商量后合并

2. 合并分支

默认合并```release```分支代码，无更好的方案之前暂由有权限同学在群里询问```release```上线版本情况，若有迭代上线时间不同，合并开发分支代码

## 提交规范

提交规范仍采用```angular```规范，否则不允许提交

### type类型

|     type    |      描述    |
|-------------|--------------|
|     feat        |    新功能    |
|     fix         |    修复bug    |
|     refactor    |    代码重构    |
|     docs        |    文档    |
|     test        |    测试代码    |
|     pref        |    优化    |
|     chore       |    构建过程或辅助工具的变动  |

### 模块

每次commit涉及的模块

### 描述

每次改动的描述

### 示例

一次完整的```commit```如下：

```
git commit -m 'feat(button): 为button添加disabled效果'
git commit -m 'docs(button): 编写button组件文档'
```
